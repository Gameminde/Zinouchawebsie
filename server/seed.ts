import { db } from "./db";
import { products, users, promoCodes } from "@shared/schema";
import { sql } from "drizzle-orm";

export async function seedDatabase() {
  console.log("üå± Seeding database...");

  // Create admin user
  const adminEmail = "admin@zinoucha.com";
  await db.insert(users).values({
    email: adminEmail,
    firstName: "Admin",
    lastName: "Zinoucha",
    isAdmin: true,
  }).onConflictDoNothing();

  // Sample product data
  const sampleProducts = [
    // V√™tements
    {
      name: "Robe √âl√©gante Noire",
      description: "Robe de soir√©e √©l√©gante en satin, parfaite pour les occasions sp√©ciales. Coupe ajust√©e et flatteuse.",
      price: "12500",
      salePrice: null,
      category: "vetements",
      subcategory: "robes",
      brand: "Elegance Paris",
      sizes: ["S", "M", "L", "XL"],
      colors: ["Noir"],
      images: ["/placeholder-dress-1.jpg"],
      stock: 15,
      featured: true,
      isNew: true,
    },
    {
      name: "Ensemble Tailleur Chic",
      description: "Tailleur deux pi√®ces moderne et professionnel. Veste cintr√©e et pantalon droit pour un look sophistiqu√©.",
      price: "18500",
      salePrice: "15000",
      category: "vetements",
      subcategory: "ensembles",
      brand: "Career Style",
      sizes: ["S", "M", "L"],
      colors: ["Beige", "Noir", "Bleu marine"],
      images: ["/placeholder-suit-1.jpg"],
      stock: 20,
      featured: true,
      isNew: false,
    },
    {
      name: "Pull Cachemire Doux",
      description: "Pull en cachemire ultra-doux, parfait pour les journ√©es fra√Æches. Mati√®re premium et confortable.",
      price: "8900",
      salePrice: null,
      category: "vetements",
      subcategory: "hauts",
      brand: "Soft Luxury",
      sizes: ["S", "M", "L", "XL"],
      colors: ["Rose", "Beige", "Gris"],
      images: ["/placeholder-sweater-1.jpg"],
      stock: 30,
      featured: false,
      isNew: true,
    },
    {
      name: "Jean Slim Confortable",
      description: "Jean slim stretch pour un confort optimal toute la journ√©e. Coupe moderne et flatteuse.",
      price: "6500",
      salePrice: null,
      category: "vetements",
      subcategory: "pantalons",
      brand: "Denim Co",
      sizes: ["XS", "S", "M", "L", "XL"],
      colors: ["Bleu", "Noir"],
      images: ["/placeholder-jeans-1.jpg"],
      stock: 40,
      featured: false,
      isNew: false,
    },
    {
      name: "Chemisier Soie Blanc",
      description: "Chemisier en soie pure, √©l√©gant et polyvalent. Parfait pour le bureau ou les sorties.",
      price: "7800",
      salePrice: "6500",
      category: "vetements",
      subcategory: "hauts",
      brand: "Silk Touch",
      sizes: ["S", "M", "L"],
      colors: ["Blanc", "Cr√®me"],
      images: ["/placeholder-blouse-1.jpg"],
      stock: 25,
      featured: true,
      isNew: false,
    },
    {
      name: "Manteau Long Laine",
      description: "Manteau long en laine de qualit√© sup√©rieure. Chaleureux et √©l√©gant pour l'hiver.",
      price: "22000",
      salePrice: null,
      category: "vetements",
      subcategory: "manteaux",
      brand: "Winter Elegance",
      sizes: ["S", "M", "L", "XL"],
      colors: ["Camel", "Noir", "Gris"],
      images: ["/placeholder-coat-1.jpg"],
      stock: 12,
      featured: true,
      isNew: true,
    },
    {
      name: "Jupe Pliss√©e Mi-Longue",
      description: "Jupe pliss√©e mi-longue, style intemporel et f√©minin. Parfaite pour toutes les occasions.",
      price: "5500",
      salePrice: null,
      category: "vetements",
      subcategory: "jupes",
      brand: "Femme Chic",
      sizes: ["XS", "S", "M", "L"],
      colors: ["Noir", "Bordeaux", "Bleu marine"],
      images: ["/placeholder-skirt-1.jpg"],
      stock: 35,
      featured: false,
      isNew: false,
    },

    // Maquillage
    {
      name: "Palette Fards √† Paupi√®res Nude",
      description: "Palette de 12 fards nude pour un look naturel ou sophistiqu√©. Haute pigmentation et longue tenue.",
      price: "4500",
      salePrice: null,
      category: "maquillage",
      subcategory: "yeux",
      brand: "Beauty Pro",
      sizes: [],
      colors: ["Nude"],
      images: ["/placeholder-eyeshadow-1.jpg"],
      stock: 50,
      featured: true,
      isNew: true,
    },
    {
      name: "Rouge √† L√®vres Mat Longue Tenue",
      description: "Rouge √† l√®vres mat √† la texture velout√©e. Tenue 8h sans transfert, confort optimal.",
      price: "2800",
      salePrice: null,
      category: "maquillage",
      subcategory: "l√®vres",
      brand: "Lip Perfect",
      sizes: [],
      colors: ["Rouge", "Rose", "Nude", "Bordeaux"],
      images: ["/placeholder-lipstick-1.jpg"],
      stock: 80,
      featured: true,
      isNew: false,
    },
    {
      name: "Fond de Teint Fluide Naturel",
      description: "Fond de teint fluide pour un fini naturel et lumineux. Couvre les imperfections sans effet masque.",
      price: "3500",
      salePrice: "2900",
      category: "maquillage",
      subcategory: "teint",
      brand: "Skin Glow",
      sizes: [],
      colors: ["Ivoire", "Beige", "Caramel", "Chocolat"],
      images: ["/placeholder-foundation-1.jpg"],
      stock: 60,
      featured: false,
      isNew: false,
    },
    {
      name: "Mascara Volume Intense",
      description: "Mascara volumateur pour des cils XXL. Formule enrichie sans grumeaux, tenue 24h.",
      price: "2200",
      salePrice: null,
      category: "maquillage",
      subcategory: "yeux",
      brand: "Lash Beauty",
      sizes: [],
      colors: ["Noir", "Marron"],
      images: ["/placeholder-mascara-1.jpg"],
      stock: 70,
      featured: false,
      isNew: true,
    },
    {
      name: "Kit Pinceaux Maquillage Professionnel",
      description: "Ensemble de 12 pinceaux professionnels avec √©tui. Poils synth√©tiques ultra-doux.",
      price: "6800",
      salePrice: null,
      category: "maquillage",
      subcategory: "accessoires",
      brand: "Brush Master",
      sizes: [],
      colors: ["Rose Gold"],
      images: ["/placeholder-brushes-1.jpg"],
      stock: 30,
      featured: true,
      isNew: false,
    },
    {
      name: "Enlumineur Poudre Dor√©e",
      description: "Poudre enlumineur pour un teint √©clatant. √âclat naturel et lumineux, facile √† estomper.",
      price: "3200",
      salePrice: null,
      category: "maquillage",
      subcategory: "teint",
      brand: "Glow Beauty",
      sizes: [],
      colors: ["Or", "Champagne"],
      images: ["/placeholder-highlighter-1.jpg"],
      stock: 45,
      featured: false,
      isNew: true,
    },
    {
      name: "Eyeliner Liquide Noir Intense",
      description: "Eyeliner liquide ultra-pr√©cis avec applicateur fin. Noir intense, tenue waterproof 12h.",
      price: "1800",
      salePrice: null,
      category: "maquillage",
      subcategory: "yeux",
      brand: "Eye Perfect",
      sizes: [],
      colors: ["Noir"],
      images: ["/placeholder-eyeliner-1.jpg"],
      stock: 90,
      featured: false,
      isNew: false,
    },

    // Parfums
    {
      name: "Eau de Parfum Floral Oriental",
      description: "Parfum floral oriental envo√ªtant aux notes de jasmin, vanille et musc. Tenue longue dur√©e.",
      price: "8500",
      salePrice: null,
      category: "parfums",
      subcategory: "femme",
      brand: "Luxe Fragrance",
      sizes: ["50ml", "100ml"],
      colors: [],
      images: ["/placeholder-perfume-1.jpg"],
      stock: 25,
      featured: true,
      isNew: true,
    },
    {
      name: "Eau de Toilette Fra√Æche Citrus",
      description: "Eau de toilette l√©g√®re et fra√Æche aux notes d'agrumes et de fleurs blanches. Parfaite pour l'√©t√©.",
      price: "5500",
      salePrice: null,
      category: "parfums",
      subcategory: "femme",
      brand: "Fresh Scent",
      sizes: ["50ml", "75ml"],
      colors: [],
      images: ["/placeholder-perfume-2.jpg"],
      stock: 40,
      featured: true,
      isNew: false,
    },
    {
      name: "Parfum Intense Bois√© Ambr√©",
      description: "Fragrance intense et sophistiqu√©e aux notes bois√©es et ambr√©es. Pour une femme √©l√©gante.",
      price: "12000",
      salePrice: "9500",
      category: "parfums",
      subcategory: "femme",
      brand: "Prestige Parfum",
      sizes: ["50ml", "100ml"],
      colors: [],
      images: ["/placeholder-perfume-3.jpg"],
      stock: 18,
      featured: true,
      isNew: false,
    },
    {
      name: "Brume Corps Gourmande Vanille",
      description: "Brume parfum√©e gourmande √† la vanille et caramel. L√©g√®re et hydratante pour le corps.",
      price: "3200",
      salePrice: null,
      category: "parfums",
      subcategory: "corps",
      brand: "Sweet Body",
      sizes: ["200ml"],
      colors: [],
      images: ["/placeholder-mist-1.jpg"],
      stock: 55,
      featured: false,
      isNew: true,
    },
    {
      name: "Coffret Parfum D√©couverte",
      description: "Coffret de 5 miniatures de parfums pour d√©couvrir notre collection. Id√©al cadeau.",
      price: "4500",
      salePrice: null,
      category: "parfums",
      subcategory: "coffrets",
      brand: "Luxe Fragrance",
      sizes: ["5x10ml"],
      colors: [],
      images: ["/placeholder-giftset-1.jpg"],
      stock: 30,
      featured: false,
      isNew: false,
    },
    {
      name: "Parfum Fleur de Cerisier",
      description: "Eau de parfum d√©licate aux notes de fleur de cerisier et pivoine. F√©minit√© et fra√Æcheur.",
      price: "7200",
      salePrice: null,
      category: "parfums",
      subcategory: "femme",
      brand: "Bloom Beauty",
      sizes: ["50ml", "100ml"],
      colors: [],
      images: ["/placeholder-perfume-4.jpg"],
      stock: 35,
      featured: false,
      isNew: true,
    },
    {
      name: "Huile Parfum√©e Roll-On",
      description: "Huile parfum√©e en roll-on pour une application pr√©cise. Notes florales orientales.",
      price: "2500",
      salePrice: null,
      category: "parfums",
      subcategory: "corps",
      brand: "Oil Essence",
      sizes: ["10ml"],
      colors: [],
      images: ["/placeholder-oil-1.jpg"],
      stock: 65,
      featured: false,
      isNew: false,
    },
  ];

  // Insert products
  for (const product of sampleProducts) {
    await db.insert(products).values(product).onConflictDoNothing();
  }

  // Insert promo codes
  await db.insert(promoCodes).values([
    {
      code: "BIENVENUE10",
      discountType: "percentage",
      discountValue: "10",
      minOrderAmount: "5000",
      maxUses: 100,
      active: true,
      expiresAt: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000), // 30 days
    },
    {
      code: "SOLDES20",
      discountType: "percentage",
      discountValue: "20",
      minOrderAmount: "10000",
      maxUses: 50,
      active: true,
      expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7 days
    },
    {
      code: "LIVRAISON",
      discountType: "fixed",
      discountValue: "500",
      minOrderAmount: "3000",
      maxUses: null,
      active: true,
      expiresAt: null,
    },
  ]).onConflictDoNothing();

  console.log("‚úÖ Database seeded successfully!");
  console.log(`üìß Admin email: ${adminEmail}`);
  console.log("üéüÔ∏è  Promo codes: BIENVENUE10, SOLDES20, LIVRAISON");
}
